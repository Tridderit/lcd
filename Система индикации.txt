ТЗ на систему индикации проект "Исток"

1. Параметры отображения:
стр1:
	- Скорость генератора
	- Мощность генератора
	- Напряжение DC/DC
	- Мощность DC/DC
	- Напряжение DC/AC
	- Мощность DC/DC
	- Сопротивление изоляции
стр2:	
	- Температура DC/DC
	- Ток DC/DC
	- Напряжение DC/DC
стр3:	
	- Температура DC/AC
	- Ток DC/AC
	- Напряжение DC/AC
стр4:	
	- Температура инвертора
	- Ток инвертор
	- Напряжение инвертора
стр5:	
	- Температура генератора
	- Напряжение генератора
	- Ток генератора
стр6:	
	- Статус системы
	- Флаги ошибок DC/DC
	- Флаги ошибок DC/AC
	- Флаги ошибок AC/DC
	
2. Изменение настроек
	- Ограничение тока DC/DC
	- Макс. момент на генераторе

	
Переход из режима "параметры отображения" в режим "Изменение настроек" происходит при одновременном нажатии F1 и F2 в течении 3х секунд.
Выбор настроек для изменения происходит нажатием F1. Для начала редактирования нажать START и нажатием F1 или F2 увеличивать или уменьшать значение. При окончании редактирования нажать STOP. При повторном нажатии STOP выход из режима "Изменение настроек" в режим "Параметры отображения".

CAN протокол режима "Изменение настроек".
Тип - запрос-ответ. 

Сообщение с главным блоком управления актуальные для чтения и изменения настройки для "Ограничение тока DC/DC" и "Макс. момент на генераторе" в следующей форме:

запрос клиента(дисплей) CAN ID = 0x600 + адрес блока
формат данных:
1 байт - тип сообщения(чтение данных=0x40/запись данных=0x20)
2-3 байты - индекс параметра
4 байт - подиндекс параметра
5-8 байты - значение параметра при записи данных (1 байт = 0x20),

ответ сервера(блок управления) CAN ID = 0x580 + адрес блока
формат данных:
1 байт - тип сообщения(чтение данных=0x40/запись данных=0x60)
2-3 байты - индекс параметра
4 байт - подиндекс параметра
5-8 байты - значение параметра при чтении данных (1 байт = 0x40),

Адреса блоков:
- главный блок управления: 0x27;
- DC/DC преобразователь: 0x0A;

Источники данных
- Ограничение тока DC/DC: DC/DC преобразователь (0x0A);
- Макс. момент на генераторе: главный блок управления (0x27);

Index/Subindex:
- Ограничение тока DC/DC: 0x4350/2,
- Макс. момент на генераторе: 0x4350/5,


Пример:
1)
Запрос на запись "Ограничение тока DC/DC":
id = 0x600 + 0xA0 = 0x6A0
Data:
[0]: 0x20
[1-2]: 0x4350
[3]: 2
[4-7]: 350 (напр: 350A)

2)
Запрос на чтение "Макс. момент на генераторе":
id = 0x600 + 0x0A = 0x60A
Data:
[0]: 0x40
[1-2]: 0x4350
[3]: 5
[4-7]: 0

Ответ "Макс. момент на генераторе":
id = 0x580 + 0x0A = 0x58A
Data:
[0]: 0x40
[1-2]: 0x4350
[3]: 5
[4-7]: 35 (напр: 35 Нм)
















